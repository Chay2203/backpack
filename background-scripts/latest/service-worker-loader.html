<html><head><title>service worker loader</title><meta name="viewport" content="width=device-width, initial-scale=1"><style>body{background:red;padding-top:60px}</style></head><body> <script type="module">function e(e){document.body.style.backgroundColor=e}function r(e,r=""){var t=document.createElement("div");t.innerHTML=e+": "+r,document.body.appendChild(t)}var t;t=new URL("service-worker.js",import.meta.url).toString(),async function(){const a=function(){try{var e=window.location.href,r=e.split("/service-worker-loader.html")[0].split("background-scripts/")[1];return{url:e,hash:r||"local"}}catch(e){return{url:window.location.href,hash:e.message}}}();r("url",a.url),r("hash",a.hash),r("securecontext",window.isSecureContext),r("typeof navigator",typeof navigator.serviceWorker);r("# registrations",(await navigator.serviceWorker.getRegistrations()).length);try{const a=await navigator.serviceWorker.register(t);r("sw:register"),a.update(),e("yellow"),r("sw:registered"),await a.active.postMessage({type:"READY"})}catch(e){r("sw:register failed",e.message)}navigator.serviceWorker.addEventListener("install",(t=>{r("sw:install"),e("orange")})),navigator.serviceWorker.addEventListener("activate",(t=>{r("sw:active"),e("blue")})),navigator.serviceWorker.onmessage=t=>{r("sw:onmessage"),e("green"),window.ReactNativeWebView?.postMessage(JSON.stringify(t.data))},window.postMessageToBackgroundViaWebview=e=>{console.log("SERVICE WORKER: message sent",e),navigator.serviceWorker.controller.postMessage(e)}}();</script> </body></html>